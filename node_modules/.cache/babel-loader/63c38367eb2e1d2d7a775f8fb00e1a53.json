{"ast":null,"code":"import { userAPI } from \"../api/api\";\nconst FOLLOW = \"FOLLOW\";\nconst UNFOLLOW = \"UNFOLLOW\";\nconst SET_USERS = \"SET_USERS\";\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\nconst SET_TOTAL_USER_COUNT = \"SET_TOTAL_USER_COUNT\";\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\nconst FOLLOW_BUTTON_DISABLED = \"FOLLOW_BUTTON_DISABLED\";\nlet initialState = {\n  users: [],\n  pageSize: 3,\n  totalUserCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followButtonDisabled: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return { ...state,\n        users: state.users.map(u => {\n          if (u.id === action.userId) {\n            return { ...u,\n              followed: true\n            };\n          }\n\n          return u;\n        })\n      };\n\n    case UNFOLLOW:\n      return { ...state,\n        users: state.users.map(u => {\n          if (u.id === action.userId) {\n            return { ...u,\n              followed: false\n            };\n          }\n\n          return u;\n        })\n      };\n\n    case SET_USERS:\n      return { ...state,\n        users: action.users\n      };\n\n    case SET_CURRENT_PAGE:\n      return { ...state,\n        currentPage: action.activePage\n      };\n\n    case SET_TOTAL_USER_COUNT:\n      return { ...state,\n        totalUserCount: action.totalCount\n      };\n\n    case SET_IS_FETCHING:\n      return { ...state,\n        isFetching: action.isFetching\n      };\n\n    case FOLLOW_BUTTON_DISABLED:\n      return { ...state,\n        followButtonDisabled: action.isFetching ? [...state.followButtonDisabled, action.userId] : [...state.followButtonDisabled.filter(f => f !== action.userId)]\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const handleFollowActionCreate = userId => ({\n  type: FOLLOW,\n  userId\n});\nexport const handleUnFollowActionCreate = userId => ({\n  type: UNFOLLOW,\n  userId\n}); //добавление юзеров с сервера\n\nexport const setUsersActionCreate = users => ({\n  type: SET_USERS,\n  users\n});\nexport const setCurrentPageActionCreate = activePage => ({\n  type: SET_CURRENT_PAGE,\n  activePage\n});\nexport const setTotalUserCountActionCreate = setTotalUserCount => ({\n  type: SET_TOTAL_USER_COUNT,\n  totalCount: setTotalUserCount\n});\nexport const setIsFetchingActionCreate = isFetching => ({\n  type: SET_IS_FETCHING,\n  isFetching\n});\nexport const setFollowButtonDisabledActionCreate = (isFetching, userId) => ({\n  type: FOLLOW_BUTTON_DISABLED,\n  isFetching,\n  userId\n}); // export const handleChangeMessageActionCreate = (msg) => {\n//   return { type: CHANGE_MESSAGE, msg }\n// }\n\nexport const getUsersThunkCreator = (currentPage, pageSize) => {\n  return dispatch => {\n    dispatch(setIsFetchingActionCreate(true));\n    userAPI.getUsers(currentPage, pageSize).then(res => {\n      dispatch(setUsersActionCreate(res.items));\n      dispatch(setTotalUserCountActionCreate(res.totalCount));\n      dispatch(setIsFetchingActionCreate(false));\n    });\n  };\n};\nexport const followThunkCreator = id => {\n  return dispatch => {\n    dispatch(setFollowButtonDisabledActionCreate(true, id));\n    userAPI.follow(id).then(res => {\n      if (res.data.resultCode === 0) {\n        dispatch(handleFollowActionCreate(id));\n      }\n\n      dispatch(setFollowButtonDisabledActionCreate(false, id));\n    });\n  };\n};\nexport const unFollowThunkCreator = id => {\n  return dispatch => {\n    dispatch(setFollowButtonDisabledActionCreate(true, id));\n    userAPI.unfollow(id).then(res => {\n      if (res.data.resultCode === 0) {\n        dispatch(handleUnFollowActionCreate(id));\n      }\n\n      dispatch(setFollowButtonDisabledActionCreate(false, id));\n    });\n  };\n};\nexport default usersReducer;","map":{"version":3,"sources":["/home/bravedevuser/projects/react-test/social-redux/react-redux/src/redux/UsersReducer.js"],"names":["userAPI","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USER_COUNT","SET_IS_FETCHING","FOLLOW_BUTTON_DISABLED","initialState","users","pageSize","totalUserCount","currentPage","isFetching","followButtonDisabled","usersReducer","state","action","type","map","u","id","userId","followed","activePage","totalCount","filter","f","handleFollowActionCreate","handleUnFollowActionCreate","setUsersActionCreate","setCurrentPageActionCreate","setTotalUserCountActionCreate","setTotalUserCount","setIsFetchingActionCreate","setFollowButtonDisabledActionCreate","getUsersThunkCreator","dispatch","getUsers","then","res","items","followThunkCreator","follow","data","resultCode","unFollowThunkCreator","unfollow"],"mappings":"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","sourcesContent":["import { userAPI } from \"../api/api\";\r\n\r\nconst FOLLOW = \"FOLLOW\";\r\nconst UNFOLLOW = \"UNFOLLOW\";\r\nconst SET_USERS = \"SET_USERS\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOTAL_USER_COUNT = \"SET_TOTAL_USER_COUNT\";\r\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\r\nconst FOLLOW_BUTTON_DISABLED = \"FOLLOW_BUTTON_DISABLED\";\r\n\r\nlet initialState = {\r\n  users: [],\r\n  pageSize: 3,\r\n  totalUserCount: 0,\r\n  currentPage: 1,\r\n  isFetching: false,\r\n  followButtonDisabled: [],\r\n};\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map((u) => {\r\n          if (u.id === action.userId) {\r\n            return { ...u, followed: true };\r\n          }\r\n          return u;\r\n        }),\r\n      };\r\n\r\n    case UNFOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map((u) => {\r\n          if (u.id === action.userId) {\r\n            return { ...u, followed: false };\r\n          }\r\n          return u;\r\n        }),\r\n      };\r\n\r\n    case SET_USERS:\r\n      return { ...state, users: action.users };\r\n\r\n    case SET_CURRENT_PAGE:\r\n      return { ...state, currentPage: action.activePage };\r\n\r\n    case SET_TOTAL_USER_COUNT:\r\n      return { ...state, totalUserCount: action.totalCount };\r\n\r\n    case SET_IS_FETCHING:\r\n      return { ...state, isFetching: action.isFetching };\r\n\r\n    case FOLLOW_BUTTON_DISABLED:\r\n      return {\r\n        ...state,\r\n        followButtonDisabled: action.isFetching\r\n          ? [...state.followButtonDisabled, action.userId]\r\n          : [...state.followButtonDisabled.filter((f) => f !== action.userId)],\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const handleFollowActionCreate = (userId) => ({ type: FOLLOW, userId });\r\nexport const handleUnFollowActionCreate = (userId) => ({\r\n  type: UNFOLLOW,\r\n  userId,\r\n});\r\n//добавление юзеров с сервера\r\nexport const setUsersActionCreate = (users) => ({ type: SET_USERS, users });\r\nexport const setCurrentPageActionCreate = (activePage) => ({\r\n  type: SET_CURRENT_PAGE,\r\n  activePage,\r\n});\r\nexport const setTotalUserCountActionCreate = (setTotalUserCount) => ({\r\n  type: SET_TOTAL_USER_COUNT,\r\n  totalCount: setTotalUserCount,\r\n});\r\nexport const setIsFetchingActionCreate = (isFetching) => ({\r\n  type: SET_IS_FETCHING,\r\n  isFetching,\r\n});\r\nexport const setFollowButtonDisabledActionCreate = (isFetching, userId) => ({\r\n  type: FOLLOW_BUTTON_DISABLED,\r\n  isFetching,\r\n  userId,\r\n});\r\n// export const handleChangeMessageActionCreate = (msg) => {\r\n//   return { type: CHANGE_MESSAGE, msg }\r\n// }\r\n\r\nexport const getUsersThunkCreator=(currentPage,pageSize)=>{\r\n  return (dispatch) => {\r\n    dispatch(setIsFetchingActionCreate(true))\r\n\r\n      userAPI\r\n        .getUsers(currentPage, pageSize)\r\n        .then((res) => {\r\n          dispatch(setUsersActionCreate(res.items))\r\n          dispatch(setTotalUserCountActionCreate(res.totalCount))\r\n          dispatch(setIsFetchingActionCreate(false))\r\n        });\r\n  }\r\n}\r\n\r\n\r\nexport const followThunkCreator=(id)=>{\r\n  return (dispatch) => {\r\n    dispatch(setFollowButtonDisabledActionCreate(true, id))\r\n\r\n    userAPI.follow(id).then((res) => {\r\n      if (res.data.resultCode === 0) {\r\n        dispatch(handleFollowActionCreate(id))\r\n      }\r\n      dispatch(setFollowButtonDisabledActionCreate(false, id))\r\n    });\r\n  }\r\n}\r\n\r\nexport const unFollowThunkCreator=(id)=>{\r\n  return (dispatch) => {\r\n    dispatch(setFollowButtonDisabledActionCreate(true, id))\r\n\r\n    userAPI.unfollow(id).then((res) => {\r\n      if (res.data.resultCode === 0) {\r\n        dispatch(handleUnFollowActionCreate(id))\r\n      }\r\n      dispatch(setFollowButtonDisabledActionCreate(false, id))\r\n    });\r\n  }\r\n}\r\nexport default usersReducer;\r\n"]},"metadata":{},"sourceType":"module"}